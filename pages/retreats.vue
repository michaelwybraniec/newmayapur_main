<template>
  <div class="bg-base-200 py-28 lg:px-16">
    <div
      class="grid grid-rows-1 2xl:grid-cols-2 px-4 2xl:px-20 items-center gap-x-4"
    >
      <div class="order-2 2xl:order-1 md:px-24 2xl:px-0">
        <h2 class="text-xl uppercase font-bold">Retreat Center</h2>
        <p class="pt-3 text-lg">
          New Mayapur is situated in a haven of peace, amongst the forests and
          fields of Indre, in the center of France. What better setting to take
          a break from the hustle and bustle of your everyday life? We organize
          regular events centered around the discovery and practice of yoga and
          its adjacent culture, be it ahimsa cooking, a natural lifestyle, or
          study of spirituality.
        </p>
      </div>
      <img
        class="order-1 lg:max-w-lg max-w-xs md:max-w-md 2xl:order-2 mb-12 2xl:mb-0 md:mb-24 2xl:ml-auto 2xl:mr-0 mx-auto rounded-lg"
        src="/img/meditation.jpg"
      />
    </div>
  </div>
  <div class="pb-32 pt-28 lg:px-10 lg:w-[1000px] mx-auto">
    <h2 class="text-2xl font-bold text-center mb-12">Our Events</h2>
    <div
      class="flex flex-col mx-4 md:flex-row gap-4 items-center justify-center mb-16"
    >
      <img class="md:h-[245px] rounded-xl" src="/img/yoga.jpg" />
      <img class="md:h-[245px] rounded-xl" src="/img/food.jpg" />
    </div>
    <div class="mx-4">
      <div
        tabindex="0"
        class="collapse collapse-plus border border-base-300 bg-base-100 rounded-box"
      >
        <input type="checkbox" />
        <div class="collapse-title text-xl font-medium">Open House Sundays</div>
        <div class="collapse-content">
          <p>
            Come and visit us every Sunday for our open days! Join us for a
            short and sweet program, starting at 11am and ending at 3pm. You'll
            discover the castle and its domain, meet our cows, participate in
            kirtan and much more. A full vegetarian meal is offered at 2pm for
            all of our guests. Everything is free, but a donation is always
            appreciated!
          </p>
        </div>
      </div>
      <div
        tabindex="0"
        class="collapse collapse-plus border mt-4 border-base-300 bg-base-100 rounded-box"
      >
        <input type="checkbox" />
        <div class="collapse-title text-xl font-medium">Immersion Weekends</div>
        <div class="collapse-content">
          <p>
            Our immersion weekends are a great way to get a head start on
            <i>vaisnava</i> traditions and culture. Spanning over the course of
            two days, those weekends are an introduction to the practice of
            timeless spiritual wisdom, and to show its relevance up to this day.
            You'll be hosted in our comfortable guest-house and provided with
            three delicious meals a day, and will have a great opportunity to
            meet like-minded individuals interested in making their lives more
            meaningful.
          </p>
        </div>
      </div>
      <div
        tabindex="0"
        class="collapse collapse-plus mt-4 border border-base-300 bg-base-100 rounded-box"
      >
        <input type="checkbox" />
        <div class="collapse-title text-xl font-medium">Full Retreats</div>
        <div class="collapse-content">
          <p>
            Full retreats are dedicated to specific topics (such as
            <i>ayurveda</i> or <i>hatha-yoga</i>, for example), last for a
            minimum of four days, and are a great way to take a deeper dive into
            the <i>yoga</i> tradition. Meet our team of qualified teachers and
            take part in exciting and engaging classes, amongst beautiful
            surroundings of natural fields and forests.
          </p>
        </div>
      </div>
    </div>
  </div>
  <div class="bg-base-200 py-28 lg:px-16">
    <div
      class="grid grid-rows-1 2xl:grid-cols-2 px-4 2xl:px-20 items-center gap-x-4"
    >
      <div class="order-2 2xl:order-2 md:px-24 2xl:px-0">
        <h2 class="text-xl uppercase font-bold">On-site Accomodation</h2>
        <p class="pt-3 text-lg">
          Book a room in our fully furnished, comfortable guest-house for the
          duration of your stay.
        </p>
        <div class="grid md:grid-cols-2 gap-12 lg:gap-x-8 xl:gap-x-16 mt-10">
          <div>
            <h2 class="font-bold uppercase text-xl">47 Beds</h2>
            <h3 class="italic text-lg">Shared Bathroom</h3>
            <ul class="mt-4 text-lg">
              <li>ðŸ’¤ 1 Single Room</li>
              <li>ðŸ’¤ 8 Double Rooms</li>
              <li>ðŸ’¤ 1 Triple Room</li>
              <li>ðŸ’¤ 6 Family Rooms (3 to 5 Beds)</li>
            </ul>
          </div>
          <div>
            <h2 class="font-bold uppercase text-xl">22 Beds</h2>
            <h3 class="italic text-lg">Private Bathrooms</h3>
            <ul class="mt-4 text-lg">
              <li>ðŸ’¤ 1 Single Room</li>
              <li>ðŸ’¤ 6 Double Rooms</li>
              <li>ðŸ’¤ 1 Triple Room</li>
              <li>ðŸ’¤ 1 Four Beds Room</li>
            </ul>
          </div>
        </div>
      </div>
      <img
        class="order-1 lg:max-w-lg max-w-xs md:max-w-md 2xl:order-1 mb-12 2xl:mb-0 md:mb-24 2xl:mr-auto 2xl:ml-0 mx-auto rounded-lg"
        src="/img/bed.jpg"
      />
    </div>
  </div>
  <div>
    <div class="mx-auto pt-24 pb-32 lg:px-6 2xl:px-16">
      <div class="md:px-24 mx-4 lg:px-0 lg:flex flex-col lg:items-center mb-20">
        <div class="p-5 pb-6 lg:pb-4 inline bg-base-200 rounded-xl">
          <Icon name="ion:calendar-outline" size="28px" />
        </div>
        <h2 class="text-xl uppercase font-bold mt-8">Upcoming Events</h2>
        <p class="pt-3 lg:w-[800px] lg:text-center text-lg mt-2">
          Discover the science of <i>yoga</i> in all of its variety. From
          practicing asanas to learning the ancient philosophy of
          <b>Sanskrit</b> texts, or simply getting introduced to our place, we
          offer a variety of events all year round.
        </p>
      </div>
      <div
        class="grid grid-cols-1 lg:grid-cols-3 mx-auto 2xl:w-[1300px] px-4 2xl:px-20 items-center gap-x-4"
      >
        <div
          v-for="event in events.data"
          class="card mt-6 h-[430px] md:mx-auto max-w-sm bg-base-100 shadow-xl"
        >
          <figure>
            <img
              :src="
                config.public.strapiBase +
                event.attributes.Thumbnail.data.attributes.formats.small.url
              "
              class="h-52 w-full object-cover"
              alt="Shoes"
            />
          </figure>
          <div class="card-body">
            <h2 class="card-title">
              {{ event.attributes.Title.substr(0, 16) + "..." }}
            </h2>
            <p>{{ event.attributes.Description.substr(0, 65) + "..." }}</p>
            <div class="flex justify-end">
              <NuxtLink
                :to="'events/' + event.id"
                class="btn btn-primary btn-outline"
                >Read More</NuxtLink
              >
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
const { find } = useStrapi();

const mail = reactive({ value: "" });
const res = ref("");

const events = await find("events", {
  pagination: {
    pageSize: 3,
    page: 1,
  },
  populate: "Thumbnail",
  sort: ["publishedAt:desc"],
});

const config = useRuntimeConfig();
</script>
